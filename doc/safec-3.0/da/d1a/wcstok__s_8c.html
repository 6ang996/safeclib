<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>safec: wcstok_s.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">safec
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Safe C Library - ISO TR24731 Bounds Checking Interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/d1a/wcstok__s_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wcstok_s.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d9/d63/safeclib__private_8h_source.html">safeclib_private.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for wcstok_s.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d2d/wcstok__s_8c__incl.png" border="0" usemap="#wcstok__s_8c" alt=""/></div>
<map name="wcstok__s_8c" id="wcstok__s_8c">
<area shape="rect" id="node2" href="../../d9/d63/safeclib__private_8h.html" title="safeclib_private.h" alt="" coords="259,80,359,107"/>
</map>
</div>
</div>
<p><a href="../../da/d1a/wcstok__s_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af7ed0d37e3a7ec161ae9cf29f37f2e92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d63/safeclib__private_8h.html#a3472d8cdbb788d5f1815b3522595bc49">EXPORT</a> wchar_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a> (wchar_t *restrict dest, <a class="el" href="../../db/d69/safe__lib_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a> *restrict dmax, const wchar_t *restrict delim, wchar_t **restrict ptr)</td></tr>
<tr class="memdesc:af7ed0d37e3a7ec161ae9cf29f37f2e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">A sequence of calls to the wcstok_s function breaks the string pointed to by dest into a sequence of tokens, each of which is delimited by a character from the string pointed to by delim.  <a href="#af7ed0d37e3a7ec161ae9cf29f37f2e92">More...</a><br /></td></tr>
<tr class="separator:af7ed0d37e3a7ec161ae9cf29f37f2e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af7ed0d37e3a7ec161ae9cf29f37f2e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ed0d37e3a7ec161ae9cf29f37f2e92">&#9670;&nbsp;</a></span>wcstok_s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d63/safeclib__private_8h.html#a3472d8cdbb788d5f1815b3522595bc49">EXPORT</a> wchar_t* wcstok_s </td>
          <td>(</td>
          <td class="paramtype">wchar_t *restrict&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d69/safe__lib_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a> *restrict&#160;</td>
          <td class="paramname"><em>dmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *restrict&#160;</td>
          <td class="paramname"><em>delim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wchar_t **restrict&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A sequence of calls to the wcstok_s function breaks the string pointed to by dest into a sequence of tokens, each of which is delimited by a character from the string pointed to by delim. </p>
<p>The fourth argument points to a caller-provided char pointer into which the wcstok_s function stores information necessary for it to continue scanning the same string.</p>
<p>The first call in a sequence has a non-null first argument and dmax points to an object whose value is the number of elements in the character array pointed to by the first argument. The first call stores an initial value in the object pointed to by ptr and updates the value pointed to by dmax to reﬂect the number of elements that remain in relation to ptr. Subsequent calls in the sequence have a null first argument and the objects pointed to by dmax and ptr are required to have the values stored by the previous call in the sequence, which are then updated. The separator string pointed to by delim may be different from call to call.</p>
<p>The first call in the sequence searches the string pointed to by dest for the first character that is not contained in the current separator string pointed to by delim. If no such character is found, then there are no tokens in the string pointed to by dest and the wcstok_s function returns a null pointer. If such a character is found, it is the start of the first token.</p>
<p>The wcstok_s function then searches from there for the first character in dest that is contained in the current separator string. If no such character is found, the current token extends to the end of the string pointed to by dest, and subsequent searches in the same string for a token return a null pointer. If such a character is found, it is overwritten by a null character, which terminates the current token.</p>
<p>In all cases, the wcstok_s function stores sufﬁcient information in the pointer pointed to by ptr so that subsequent calls, with a null pointer for dest and the unmodiﬁed pointer value for ptr, shall start searching just past the element overwritten by a null character (if any).</p>
<p>delim uses a STRTOK_DELIM_MAX_LEN of 16.</p>
<dl class="section remark"><dt>Remarks</dt><dd>SPECIFIED IN<ul>
<li>C11 standard (ISO/IEC 9899:2011): K.3.7.3.1 The wcstok_s function (p: 620-621) <a href="http://en.cppreference.com/w/c/string/byte/strok">http://en.cppreference.com/w/c/string/byte/strok</a></li>
<li>ISO/IEC TR 24731-1, Programming languages, environments and system software interfaces, Extensions to the C Library, Part I: Bounds-checking interfaces</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>pointer to string to tokenize </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dmax</td><td>restricted maximum length of dest string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delim</td><td>pointer to delimiter string (len &lt; 255) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ptr</td><td>returned pointer to token</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>delim shall not be a null pointer. </dd>
<dd>
ptr shall not be a null pointer. </dd>
<dd>
dmax shall not be a null pointer. </dd>
<dd>
*dmax shall not be 0. </dd>
<dd>
If dest is a null pointer, then *ptr shall not be a null pointer. </dd>
<dd>
dest must not be unterminated. </dd>
<dd>
The value of *dmax shall not be greater than RSIZE_MAX_WSTR. The end of the token found shall occur within the first *dmax characters of dest for the first call, and shall occur within the first *dmax characters of where searching resumes on subsequent calls. </dd>
<dd>
delim must not be longer than STRTOK_DELIM_MAX_LEN (default: 16).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The mingw MINGW_HAS_SECURE_API declares it without the dmax argument. Skip it there.</dd>
<dd>
C11 uses RSIZE_MAX, not RSIZE_MAX_WSTR.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The wcstok_s function returns a pointer to the first character of a token; or a null pointer if there is no token or there is a runtime-constraint violation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ESNULLP</td><td>when dest/delim/ptr is NULL pointer </td></tr>
    <tr><td class="paramname">ESZEROL</td><td>when *dmax = 0 </td></tr>
    <tr><td class="paramname">ESLEMAX</td><td>when *dmax &gt; RSIZE_MAX_WSTR </td></tr>
    <tr><td class="paramname">ESUNTERM</td><td>when unterminated string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>Example to demonstrate usage of <a class="el" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92" title="A sequence of calls to the wcstok_s function breaks the string pointed to by dest into a sequence of ...">wcstok_s()</a> to tokenize a string <div class="fragment"><div class="line"><span class="comment">// Approach1: sequential wcstok_s() calls</span></div><div class="line">str1 = L<span class="stringliteral">&quot;,.:*one,two;three,;four*.*.five-six***&quot;</span>; <span class="comment">// String to tokenize </span></div><div class="line"><a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a> = 38;</div><div class="line">str2 = L<span class="stringliteral">&quot;,.;*&quot;</span>; <span class="comment">// String of delimiters</span></div><div class="line"></div><div class="line">p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(str1, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str); </div><div class="line"><span class="comment">// token: one, remaining: two;three,;four*.*.five-six***, len: 30</span></div><div class="line"></div><div class="line">p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line"><span class="comment">// token: two, remaining: three,;four*.*.five-six***, len: 26</span></div><div class="line"></div><div class="line">p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line"><span class="comment">// token: three,  remaining: ;four*.*.five-six***, len: 20</span></div><div class="line"></div><div class="line">p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line"><span class="comment">// token: four, remaining .*.five-six***, len: 14</span></div><div class="line"></div><div class="line">p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line"><span class="comment">// token: five-six, remaining: **, len: 2</span></div><div class="line"></div><div class="line"> p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line"> <span class="comment">// token: (null), remaining: **, len: 0</span></div><div class="line"></div><div class="line"> <span class="comment">// Approach2: Use of while loop with same entry data as used above</span></div><div class="line"> p2tok = str1;</div><div class="line"> <span class="keywordflow">while</span> (p2tok &amp;&amp; <a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>) </div><div class="line"> {</div><div class="line">   p2tok = <a class="code" href="../../da/d1a/wcstok__s_8c.html#af7ed0d37e3a7ec161ae9cf29f37f2e92">wcstok_s</a>(NULL, &amp;<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>, str2, &amp;p2str);</div><div class="line">   printf(<span class="stringliteral">&quot;  token --   remaining --  len=0 \n&quot;</span>, p2tok, p2str, (<span class="keywordtype">int</span>)<a class="code" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a> );</div><div class="line"> }</div></div><!-- fragment --> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d1a/wcstok__s_8c_source.html#l00160">160</a> of file <a class="el" href="../../da/d1a/wcstok__s_8c_source.html">wcstok_s.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr class="footer"/><address class="footer"><small>
Generated for Safe C Library 30082017.227-g01d729 3.0
by <a href="http://www.doxygen.org/index.html">doxygen</a>
</small></address></body></html>
