<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>safec: wcstombs_s.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">safec
   &#160;<span id="projectnumber">3.1</span>
   </div>
   <div id="projectbrief">Safe C Library - ISO TR24731 Bounds Checking Interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/db9/wcstombs__s_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wcstombs_s.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d8/dff/safe__str__lib_8h.html">safe_str_lib.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for wcstombs_s.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/d13/wcstombs__s_8c__incl.png" border="0" usemap="#wcstombs__s_8c" alt=""/></div>
<map name="wcstombs__s_8c" id="wcstombs__s_8c">
<area shape="rect" id="node2" href="../../d8/dff/safe__str__lib_8h.html" title="safe_str_lib.h" alt="" coords="275,80,356,107"/>
<area shape="rect" id="node3" href="../../d3/ddb/safe__config_8h.html" title="safe_config.h" alt="" coords="5,155,87,181"/>
<area shape="rect" id="node4" href="../../d0/dc2/safe__lib__errno_8h.html" title="safe_lib_errno.h" alt="" coords="111,155,205,181"/>
<area shape="rect" id="node6" href="../../dd/d0a/safe__types_8h.html" title="safe_types.h" alt="" coords="229,155,308,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a622fcfc636877244ea3f835b43bbde37"><td class="memItemLeft" align="right" valign="top">EXPORT errno_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db9/wcstombs__s_8c.html#a622fcfc636877244ea3f835b43bbde37">wcstombs_s</a> (size_t *restrict retval, char *restrict dest, <a class="el" href="../../dd/d0a/safe__types_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a> dmax, const wchar_t *restrict src, <a class="el" href="../../dd/d0a/safe__types_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a> <a class="el" href="../../d8/dbe/towctrans_8c.html#ad4c01009aad5a218ea64c329ebfe653d">len</a>)</td></tr>
<tr class="memdesc:a622fcfc636877244ea3f835b43bbde37"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <code>wcstombs_s</code> function converts a sequence of wide characters from the array whose first element is pointed to by <code>src</code> to to its narrow multibyte representation from the current LC_CTYPE locale.  <a href="#a622fcfc636877244ea3f835b43bbde37">More...</a><br /></td></tr>
<tr class="separator:a622fcfc636877244ea3f835b43bbde37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a622fcfc636877244ea3f835b43bbde37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622fcfc636877244ea3f835b43bbde37">&#9670;&nbsp;</a></span>wcstombs_s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT errno_t wcstombs_s </td>
          <td>(</td>
          <td class="paramtype">size_t *restrict&#160;</td>
          <td class="paramname"><em>retval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *restrict&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d0a/safe__types_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a>&#160;</td>
          <td class="paramname"><em>dmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wchar_t *restrict&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d0a/safe__types_8h.html#a648363f66636da630ae2caff1778b0f4">rsize_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The <code>wcstombs_s</code> function converts a sequence of wide characters from the array whose first element is pointed to by <code>src</code> to to its narrow multibyte representation from the current LC_CTYPE locale. </p>
<p>If <code>dest</code> is not null, converted characters are stored in the successive elements of <code>dest</code>. No more than <code>len</code> bytes are written to the destination array. Each wide character is converted as if by a call to <code>wcrtomb</code>. <code>wcstombs_s</code> clobbers the destination array from the terminating null and until <code>dmax</code>.</p>
<p>The conversion stops if:</p>
<ul>
<li>The wide null character <code>L'\0'</code> was converted and stored. The bytes stored in this case are the unshift sequence (if necessary) followed by <code>'\0'</code>.</li>
<li>A <code>wchar_t</code> was found that does not correspond to a valid character in the current LC_CTYPE locale.</li>
<li>the next multibyte character to be stored would exceed <code>len</code>. This condition is not checked if <code>dst==NULL</code>.</li>
</ul>
<p>With SAFECLIB_STR_NULL_SLACK defined all elements following the terminating null character (if any) written in the array of dmax characters pointed to by dest are nulled. Also in the error cases for src = NULL, ESNOSPC and EILSEQ.</p>
<dl class="section remark"><dt>Remarks</dt><dd>SPECIFIED IN<ul>
<li>C11 standard (ISO/IEC 9899:2011): K.3.6.5.2 The wcstombs_s function (p: 612-613) <a href="http://en.cppreference.com/w/c/string/byte/wcstombs">http://en.cppreference.com/w/c/string/byte/wcstombs</a></li>
<li>ISO/IEC TR 24731, Programming languages, environments and system software interfaces, Extensions to the C Library, Part I: Bounds-checking interfaces</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">retval</td><td>the number of characters converted </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>buffer for the resulting converted multibyte character string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmax</td><td>The size in bytes of dest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>wide string that will be converted to <code>dest</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>number of bytes to be stored in <code>dest</code>, not including the terminating null character.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>retval</code> and <code>src</code> shall not be a null pointer. </dd>
<dd>
dmax and len shall not be greater than <code>RSIZE_MAX_STR</code> (unless <code>dest</code> is null). </dd>
<dd>
<code>dmax</code> shall not equal zero (unless <code>dest</code> is null). </dd>
<dd>
<code>dmax</code> shall be greater than <code>len</code>. </dd>
<dd>
Copying shall not take place between objects that overlap.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>C11 uses RSIZE_MAX, not RSIZE_MAX_STR.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If there is a runtime-constraint violation, then if <code>dest</code> is not a null pointer and <code>dmax</code> is greater than zero and not greater than RSIZE_MAX_STR, then <code>wcstombs_s</code> nulls <code>dest</code>. Then the number of bytes excluding terminating zero that were, or would be written to <code>dest</code>, is stored in <code>*retval</code>. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EOK</td><td>on successful conversion. </td></tr>
    <tr><td class="paramname">ESNULLP</td><td>when retval or src are a NULL pointer </td></tr>
    <tr><td class="paramname">ESZEROL</td><td>when dmax = 0, unless dest is NULL </td></tr>
    <tr><td class="paramname">ESLEMAX</td><td>when dmax &gt; RSIZE_MAX_STR, unless dest is NULL </td></tr>
    <tr><td class="paramname">ESOVRLP</td><td>when src and dest overlap </td></tr>
    <tr><td class="paramname">ESNOSPC</td><td>when there is no null character in the first dmax multibyte characters in the src array and len is greater than dmax (unless dest is null) </td></tr>
    <tr><td class="paramname">EILSEQ</td><td>if returned by wcstombs()</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>mbstowc_s() </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr class="footer"/><address class="footer"><small>
Generated for Safe C Library 09102017.0-g9db9fd 3.1
by <a href="http://www.doxygen.org/index.html">doxygen</a>
</small></address></body></html>
